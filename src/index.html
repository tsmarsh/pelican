<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pelican Bingo</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <!-- Mode Toggle -->
    <div id="mode-toggle" class="mode-toggle">
      <button id="host-mode-btn" class="mode-btn">Host Mode</button>
      <button id="player-mode-btn" class="mode-btn active">Player Mode</button>
    </div>

    <!-- Screen: Config (manage relatives and catchphrases) -->
    <div id="config-screen" class="screen">
      <h1>Pelican Bingo</h1>
      <h2>Configure Relatives</h2>

      <div class="config-section">
        <div class="relative-form">
          <input type="text" id="new-relative-name" placeholder="Relative name">
          <button id="add-relative-btn">Add Relative</button>
        </div>

        <div id="relatives-list" class="relatives-list"></div>
      </div>

      <div class="nav-buttons">
        <button id="to-event-setup-btn" class="primary-btn">Setup Event</button>
      </div>
    </div>

    <!-- Screen: Event Setup -->
    <div id="event-setup-screen" class="screen hidden">
      <h1>Event Setup</h1>

      <div class="form-group">
        <label for="event-id">Event ID</label>
        <input type="text" id="event-id" placeholder="e.g., thanksgiving2024">
      </div>

      <div class="form-group">
        <label for="player-name">Your Name</label>
        <input type="text" id="player-name" placeholder="Enter your name">
      </div>

      <div class="form-group">
        <label for="max-relatives">Max Relatives per Card</label>
        <input type="number" id="max-relatives" value="5" min="1" max="25">
      </div>

      <div class="form-group">
        <label for="phrases-per-relative">Phrases per Relative</label>
        <input type="number" id="phrases-per-relative" value="5" min="1" max="5">
      </div>

      <div class="nav-buttons">
        <button id="back-to-config-btn">Back to Config</button>
        <button id="generate-qr-btn">Generate Join QR</button>
        <button id="start-game-btn" class="primary-btn">Start Game</button>
      </div>
    </div>

    <!-- QR Code Modal -->
    <div id="qr-modal" class="modal hidden">
      <div class="modal-content">
        <h2>Join This Event</h2>
        <p class="qr-instructions">Scan this to join this event in Pelican</p>
        <div id="qr-code-container"></div>
        <button id="close-qr-btn" class="primary-btn">Close</button>
      </div>
    </div>

    <!-- Shared Link Banner -->
    <div id="shared-link-banner" class="banner hidden">
      <span id="banner-message"></span>
      <button id="close-banner-btn">x</button>
    </div>

    <!-- Screen: Game (Bingo Card) -->
    <div id="game-screen" class="screen hidden">
      <div class="game-header">
        <h1>Pelican Bingo</h1>
        <p id="player-info"></p>
      </div>

      <div id="bingo-card" class="bingo-card"></div>

      <div id="bingo-message" class="bingo-message hidden">
        <span>BINGO!</span>
        <button id="claim-bingo-btn" class="primary-btn">Claim Bingo!</button>
      </div>

      <div class="nav-buttons">
        <button id="reset-card-btn">Reset Card</button>
        <button id="new-game-btn">New Game</button>
      </div>
    </div>

    <!-- Screen: Winner (shown when player claims bingo) -->
    <div id="winner-screen" class="screen hidden">
      <div class="winner-content">
        <h1>You Win!</h1>
        <p id="winner-player-name"></p>
        <p class="winner-instructions">Show this QR code to the host to claim your win!</p>
        <div id="winner-qr-container"></div>
        <div class="nav-buttons">
          <button id="back-to-game-btn">Back to Card</button>
        </div>
      </div>
    </div>

    <!-- Screen: Host Mode -->
    <div id="host-screen" class="screen hidden">
      <h1>Host Mode</h1>

      <div class="host-event-info">
        <div class="form-group">
          <label for="host-event-id">Event ID</label>
          <input type="text" id="host-event-id" placeholder="Enter event ID">
        </div>
        <button id="set-host-event-btn" class="primary-btn">Set Event</button>
      </div>

      <div id="host-active-event" class="host-active-event hidden">
        <p>Active Event: <strong id="host-event-name"></strong></p>

        <button id="scan-winner-btn" class="primary-btn scan-btn">Scan Winner QR</button>

        <div class="winners-section">
          <h2>Winners</h2>
          <div id="winners-list" class="winners-list">
            <p class="empty-message">No winners yet</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Scanner Modal -->
    <div id="scanner-modal" class="modal hidden">
      <div class="modal-content scanner-modal-content">
        <h2>Scan Winner QR</h2>
        <div class="scanner-container">
          <video id="scanner-video" autoplay playsinline></video>
          <canvas id="scanner-canvas" class="hidden"></canvas>
        </div>
        <p id="scanner-status" class="scanner-status">Starting camera...</p>
        <button id="close-scanner-btn">Cancel</button>
      </div>
    </div>

    <!-- Winner Notification -->
    <div id="winner-notification" class="winner-notification hidden">
      <span id="notification-message"></span>
    </div>
  </div>

  <script src="pelican.js"></script>
</body>
</html>
